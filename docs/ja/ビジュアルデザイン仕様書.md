# タスバル ビジュアルデザイン仕様書

> 生成日: 2026-01-11
> 目的: 風船・背景・UIのビジュアル仕様を定義

---

## 0. デザイン思想：Liquid Glass

タスバルのビジュアルデザインは **Liquid Glass（リキッドグラス）** を基本思想とする。

### 0.1 Liquid Glass とは

Apple が iOS/macOS で導入したデザイン言語に着想を得た、透明感・奥行き・動きを重視したデザインアプローチ。

| 要素 | 説明 |
|---|---|
| 透明感 | ガラスのような半透明レイヤー、背景のぼかし |
| 奥行き | 複数レイヤーの重なり、微妙な影と光 |
| 流動性 | 液体のような滑らかなアニメーション |
| 光の屈折 | ハイライト、グラデーション、反射 |

### 0.2 タスバルでの適用

#### 風船

* **透明感**: 風船表面にガラス質の光沢、微かな透け感
* **光の屈折**: 左上からのハイライト、右下の陰影
* **流動性**: ゆったりとした浮遊、ふわっとした衝突反発

#### 背景

* **グラデーション**: 紫/ラベンダー系の垂直グラデーション
* **グリッド**: 透明度を持つ菱形グリッド、下方に向かって濃くなる
* **ライト/ダークモード**: 両モードでLiquid Glassの美しさを保持

#### UI要素

* **ボタン・カード**: 半透明の背景、微妙なブラー
* **タブバー**: ガラス質の質感、背景との融合
* **遷移**: 流れるようなページ遷移、フェード効果

### 0.3 実装ガイドライン

```dart
// Liquid Glass カラーパレット（ライトモード）
const liquidGlassLight = {
  'background': Color(0xFFF0F0FF),      // 薄いラベンダー白
  'backgroundEnd': Color(0xFFE8E0F8),   // わずかに紫味
  'grid': Color(0xFFD0D0E8),            // ラベンダーグレー
  'glass': Color(0x40FFFFFF),           // 半透明白
  'highlight': Color(0x80FFFFFF),       // ハイライト
};

// Liquid Glass カラーパレット（ダークモード）
const liquidGlassDark = {
  'background': Color(0xFF1E1E3C),      // 濃紺/青紫
  'backgroundEnd': Color(0xFF141428),   // より暗い紫
  'grid': Color(0xFF4A4A7C),            // 濃いめの青紫
  'glass': Color(0x20FFFFFF),           // 半透明白（控えめ）
  'highlight': Color(0x40FFFFFF),       // ハイライト（控えめ）
};
```

### 0.4 参考

* Apple Human Interface Guidelines - Materials
* iOS 26 / macOS 16 の Liquid Glass デザイン
* ガラスモーフィズム（Glassmorphism）

---

## 1. グリッド背景仕様

### 1.1 基本思想

- 空間を感じさせない
- 進行・評価・方向性を押し付けない
- UIや風船の「居場所」だけを静かに用意する

> **背景は主張しないが、消えもしない存在** とする。

### 1.2 グリッド形状

#### 形状
- 正方形を **45°回転** させた **菱形（ダイヤ）グリッド**
- **すべての菱形は同一サイズ**
- グリッド線の太さ・間隔は一定

#### 視点
- **真正面（フラット）**
- 俯瞰・パース・消失点なし
- 上から見下ろす表現は禁止

#### 奥行き表現
- 形状による奥行き表現は禁止
- **色のグラデーションのみで奥行きを示す**

### 1.3 ライトモード グリッド

#### 背景
- Base: `#F0F0FF` 薄いラベンダー白
- End: `#E8E0F8` わずかに紫味

#### グリッド線
- Color: `#D0D0E8` ラベンダーグレー
- Opacity: 25〜45%（垂直グラデーション）

#### 印象
- 呼吸できる
- 白すぎず、冷たくならない

### 1.4 ダークモード グリッド

#### 背景
- Base: `#1E1E3C` 濃紺/青紫
- End: `#141428` より暗い紫

#### グリッド線
- Color: `#4A4A7C` 濃いめの青紫
- Opacity: 20〜30%（垂直グラデーション）

#### 印象
- 静か
- 集中を邪魔しない
- 内省・深さを支える

### 1.5 禁止事項

- 遠近法（Perspective）
- グリッドサイズの変化
- 影・立体表現
- 床・空間・世界観の押し付け

---

## 2. 風船本体の描画仕様

### 2.1 形状

| 要素 | 観察内容 |
|---|---|
| 形状 | 正円に近い楕円（縦長） |
| 光沢 | 左上にハイライト |
| 影 | 右下が暗い |
| テクスチャ | 滑らかで透明感 |
| 質感 | ゴム風船のリアルな表現 |

```dart
class BalloonShape {
  double baseRadius = 26.0; // 基本半径
  double verticalRatio = 1.15; // 縦横比（縦長）

  double width = baseRadius * 2;
  double height = baseRadius * 2 * verticalRatio;

  Vector2 knotPosition = Vector2(0, height / 2 + 4);
}
```

### 2.2 光沢・ハイライト

```dart
class BalloonHighlight {
  Vector2 highlightOffset = Vector2(-8, -12);
  double highlightRadius = 12.0;

  RadialGradient createHighlight(Color balloonColor) {
    return RadialGradient(
      center: Alignment.topLeft,
      radius: 0.4,
      colors: [
        Colors.white.withOpacity(0.8), // 中心: 強い白
        balloonColor.withOpacity(0.3), // 外側: 薄い風船色
        balloonColor,                   // 最外: 風船色
      ],
      stops: [0.0, 0.5, 1.0],
    );
  }
}
```

### 2.3 影・陰影

```dart
class BalloonShading {
  RadialGradient createShading(Color balloonColor) {
    return RadialGradient(
      center: Alignment.bottomRight,
      radius: 0.8,
      colors: [
        balloonColor.darken(0.3), // 右下: 暗い
        balloonColor,              // 中央: 通常
      ],
      stops: [0.0, 1.0],
    );
  }
}
```

### 2.4 結び目

```dart
class BalloonKnot {
  Vector2 position;
  double size = 4.0;

  void draw(Canvas canvas, Color balloonColor) {
    canvas.drawOval(
      Rect.fromCenter(
        center: position.toOffset(),
        width: size,
        height: size * 1.5,
      ),
      Paint()
        ..color = balloonColor.darken(0.2)
        ..style = PaintingStyle.fill,
    );
  }
}
```

---

## 3. 紐の描画仕様

### 3.1 基本形状

| 要素 | 観察内容 |
|---|---|
| 色 | 風船色と同系色（やや暗め） |
| 太さ | 細い（1〜2px程度） |
| 長さ | 風船の高さの 2〜3倍 |
| 形状 | 真っ直ぐ下に垂れる |
| 結び目 | 風船下部に小さな結び目 |

### 3.2 揺れのアニメーション

```dart
class StringSwing {
  double swingAngle = 0.0;
  double maxAngle = 0.08;  // ±5度程度
  double frequency = 2.0;  // 周期（秒）

  void update(double dt) {
    swingAngle = sin(dt * frequency * 2 * pi) * maxAngle;
  }
}
```

---

## 4. タグ（おもり）の描画仕様

### 4.1 基本形状

| 要素 | 観察内容 |
|---|---|
| 形状 | 小さな立方体 |
| 色 | 風船色と同系色（パステル調） |
| サイズ | 風船の 1/8〜1/10 程度 |
| 影 | 地面に楕円の影 |
| 質感 | マットな質感 |

### 4.2 アイソメトリック立方体

- 角度: 30度
- 上面（明るい）、左面（中間）、右面（暗い）
- アイコンは上面に描画

---

## 5. 配色パレット

### 5.1 風船の色（12色パレット）

```dart
class BalloonColorPalette {
  static const colors = [
    Color(0xFFFF7B7B), // 赤
    Color(0xFFFFD966), // 黄色
    Color(0xFFB794FF), // 紫
    Color(0xFFFFB366), // オレンジ
    Color(0xFFE8E8E8), // グレー
    Color(0xFF7BEB7B), // 緑
    Color(0xFFFF94B8), // ピンク
    Color(0xFFFFB3E6), // 薄ピンク
    Color(0xFF7BD4FF), // 青
    Color(0xFFC794FF), // 薄紫
    Color(0xFFFFE699), // 薄黄
    Color(0xFFB3FFE6), // ミント
  ];

  static Color getTagColor(Color balloonColor) {
    final hsl = HSLColor.fromColor(balloonColor);
    return hsl.withSaturation(hsl.saturation * 0.6).toColor();
  }
}
```

---

## 6. パフォーマンス最適化

### 6.1 描画品質設定

```dart
enum RenderQuality { Low, Normal, High }

class QualitySettings {
  static Map<RenderQuality, Settings> presets = {
    RenderQuality.Low: Settings(
      balloonCount: 10,
      showStrings: false,
      showTags: false,
      showShadows: false,
      showHighlights: false,
    ),
    RenderQuality.Normal: Settings(
      balloonCount: 14,
      showStrings: true,
      showTags: true,
      showShadows: true,
      showHighlights: true,
    ),
    RenderQuality.High: Settings(
      balloonCount: 20,
      showStrings: true,
      showTags: true,
      showShadows: true,
      showHighlights: true,
      enableBlur: true,
    ),
  };
}
```

### 6.2 描画順序

1. 背景グラデーション
2. グリッド
3. 影（奥から手前）
4. 風船（奥から手前、Z座標ソート）

---

## 7. 実装チェックリスト

### 風船本体
- [ ] 楕円形状（縦長）
- [ ] 左上のハイライト
- [ ] 右下の陰影
- [ ] 結び目の描画
- [ ] 進捗に応じたサイズ変化

### 紐とタグ
- [ ] 紐の描画
- [ ] 紐の揺れアニメーション
- [ ] 立方体タグの描画
- [ ] タグアイコンの描画

### 背景
- [ ] 垂直グラデーション
- [ ] 菱形グリッド
- [ ] ライト/ダークモード対応

### パフォーマンス
- [ ] Z座標ソート
- [ ] 描画品質の切り替え
- [ ] FPS計測（60fps維持）

---

以上
