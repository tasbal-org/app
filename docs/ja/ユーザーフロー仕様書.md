# タスバル ユーザーフロー仕様書

> 本書は、オンボーディングから認証までの一連のユーザーフローを定義する。

---

## 1. オンボーディング

### 1.1 目的

タスバルのオンボーディングは、**使い方を教えるためのものではない。**

- 小さな一歩を肯定する
- 評価・競争・数値から切り離す
- 安心 → 静かなワクワク → 日常利用へ自然に移行させる

ことを目的とする。

### 1.2 適用条件

- 初回起動時は必ず表示
- スキップ可能
- 設定画面から再表示可能
- 新規ユーザー／ゲストユーザーともに対象

### 1.3 全体構成

| 画面 | 役割 | 感情 |
|----|----|----|
| 1 | 価値観の共有 | 安心 |
| 2 | 一歩を書く | 安心 → 行動 |
| 3 | 体験 | 驚き |
| 4 | 意味づけ | ワクワク |
| 5 | 通常利用へ | 余韻 |

### 1.4 各画面仕様

#### 画面1：価値観の共有

**メイン**
```
今日の一歩を
ここに残せます
```

**サブ**
```
それは
気づかないところで
少しずつ
広がっていきます
```

**補足**
```
立ち止まって
深呼吸することも
一歩になります
```

#### 画面2：一歩を書く

**タイトル**
```
まずは
今日の一歩を
書いてみましょう
```

**入力プレースホルダー**
```
・机に向かう
・5分だけ考える
・今日は休む

なんでも大丈夫です
```

**ボタン**
- 書いてみる

#### 画面3：完了・体験

（タスク完了操作後）

**メイン**
```
ひとつ
ここに
残りました
```

**サブ**
```
一歩が
静かに
動いています
```

#### 画面4：意味づけ

**メイン**
```
ここでは
みんなの一歩が
重なっていきます
```

**サブ**
```
誰がどれだけやったかは
表示されません

見えるのは
前に進んでいる
ということだけです
```

**補足**
```
進みましょう
```

#### 画面5：通常利用へ

**メイン**
```
これで
準備は終わりです
```

**サブ**
```
あとは
今日の一歩を
重ねていくだけです
```

**ボタン**
- 続ける

### 1.5 アニメーション仕様

#### 基本方針

- 風船を使用する
- 派手な演出は行わない
- 成果を強調しない
- 「気づいたら動いていた」感覚を作る

#### 対象画面

- 画面3：完了・体験

#### 風船アニメーション

**表示タイミング**
- タスク完了操作直後
- テキスト表示より 0.2〜0.4 秒遅らせる

**動きの内容**
- 既存の風船、または1つの風船が
  - わずかに上に浮く
  - もしくは、ごく小さく揺れる

**動きの特徴**

| 要素 | 指針 |
|----|----|
| 速度 | ゆっくり |
| 振幅 | 最小 |
| 回数 | 1回のみ |
| イージング | ease-in-out |
| 音 | なし |

#### NG例（禁止）

- ポップアップ表示
- 数値増加演出
- キラキラ・派手なエフェクト
- 効果音
- 「成功」「達成」などの文言

---

## 2. 認証フロー（オンボーディング後）

### 2.1 位置づけ

オンボーディング（画面1〜5）完了後に表示される認証案内。

- 強制認証は行わない
- スキップ（後回し）可能
- 目的は「管理」ではなく **継続・引き継ぎ・保護**

オンボーディングで形成された「安心・余韻・静かなワクワク」を壊さないことを最優先とする。

### 2.2 フロー全体構成

```text
オンボーディング完了
  ↓
A1. アカウント案内（選択）
  ├─ A2. サインアップ
  │    └─ A4. メール認証
  │         └─ A5. 認証完了
  ├─ A3. ログイン
  │    └─ A5. 認証完了
  └─ スキップ（ゲスト）→ ホーム
```

### 2.3 A1：アカウント案内（選択画面）

#### 目的
- 「今すぐ決めなくていい」を保証する
- 認証の**意味だけ**を静かに伝える

#### 表示内容

**タイトル**
```
このままでも使えます
```

**説明**
```
記録を引き継いだり
別の端末でも使うには
アカウントが必要になります
```

**メリット（箇条書き）**
- 端末を変えても続きから使える
- データを失いにくくなる
- 公開風船に参加できる（任意）

#### ボタン
- Primary: アカウントを作る
- Secondary: ログインする
- Tertiary: あとで（いまはこのまま）

#### 補足
- 「なぜアカウントが必要？」リンクを任意で配置
- ランキング・評価・義務的表現は禁止

### 2.4 A2：サインアップ（メール）

#### 入力項目
- メールアドレス（必須）
- パスワード（必須）8文字以上

**タイトル**
```
アカウントを作る
```

**サブ**
```
引き継ぎのために使います
```

#### ボタン
- Primary: 次へ
- Secondary: ログインに切り替える
- Back: 戻る

### 2.5 A3：ログイン

#### 入力項目
- メールアドレス
- パスワード

#### ボタン
- Primary: ログイン
- Secondary: アカウントを作る
- テキスト: パスワードを忘れた

### 2.6 A4：メール認証

#### 方式
- 確認コード（6桁）を推奨

**タイトル**
```
確認コードを入力
```

**説明**
```
メールに送ったコードを
入力してください
```

#### ボタン
- Primary: 確認する
- テキスト: コードを再送する
- テキスト: メールアドレスを変更

### 2.7 A5：認証完了

**タイトル**
```
準備ができました
```

**サブ**
```
今日の一歩は
そのまま引き継がれます
```

#### ボタン
- Primary: 続ける（ホームへ）

---

## 3. ゲスト運用

### 3.1 ゲスト継続
- A1で「あとで」を選択した場合、ゲストとして利用継続

### 3.2 認証を提案するタイミング
- 端末変更・バックアップ時
- 公開風船への参加・作成時
- セッション切れ時

### 3.3 ゲスト → 認証 データ移行

#### 移行対象
- 作成タスク
- 選択中の風船状態
- 達成履歴（内部保持）

#### 原則
- ユーザー操作を増やさない
- 認証成功時に自動統合

---

## 4. エラーメッセージ方針

- 叱らない
- 急かさない
- 短く伝える

### 例
- メール形式: メールアドレスを確認してください
- パスワード: 入力が合っていないようです
- コード期限: コードの期限が切れました。再送できます
- 通信: 通信が不安定です。もう一度試してください

---

## 5. 状態管理

- `hasCompletedOnboarding`: boolean
- `authState`: guest | authenticated
- `onboardingVersion`: number
- `pendingEmail`: string?
- `guestId` / `deviceId`
- `migrationStatus`: none | pending | done | failed

---

## 6. UI / 導線ルール

- A1では必ず「あとで」を用意
- 説明より操作を優先
- 認証完了後に煽り文言を出さない

---

## 7. まとめ

コピーも演出も静かに。
**確かに何かが起きている。**

- オンボーディング：風船が、少し動く という体験にすべて託す
- 認証：義務ではなく「続けるための手続き」
- 必要になったときに、自然に差し出す
